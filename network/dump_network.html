<html>
<head>
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, minimal-ui">
<style>
</style>
<script>
  function message(msg) {
    console.log(msg);
    let panel = document.getElementById('panel');
    let msgNode = document.createElement('div');
    msgNode.innerHTML = msg;
    panel.appendChild(msgNode);
    if (panel.childElementCount > 20) {
      panel.removeChild(panel.children[0]);
    }
  }
</script>
<script>
  var container;
  var currentType;
  var currentEType;
  function dumpNetwork() {
    if (currentType == navigator.connection.type
        && currentEType == navigator.connection.effectiveType) {
      return;
    }
    currentType = navigator.connection.type;
    currentEType = navigator.connection.effectiveType;
    message("network[" + currentType + ", " + currentEType + "]");
  }
  function onload() {
    container = document.querySelector('#container');
    dumpNetwork();
    navigator.connection.onchange = dumpNetwork;
  }
</script>
</head>
<body onload='onload()'>
  <div id='panel'>
  </div>
</body>
</html>
